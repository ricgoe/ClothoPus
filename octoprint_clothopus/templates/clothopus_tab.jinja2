<div id="clothopus_tab" class="section">
  <h3>Clothopus Filament Manager</h3>

  <div class="mb-3">
    <button type="button" class="btn btn-primary" id="add_filament_btn">
      <i class="fas fa-plus"></i> Add Filament
    </button>
  </div>

  <table class="table table-striped table-bordered" id="clothopus_filament_table">
    <thead class="thead-dark">
      <tr>
        <th>#</th>
        <th>Name</th>
        <th>Kind</th>
        <th>Manufacturer</th>
        <th>Color</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      {% set rows = plugin_clothopus_clothopus_rows %}

      {% for row in rows %}
        {% set main = row.data.main if row.data is defined and row.data.main is defined else {} %}
        {% set primary_color = main.primary_color if main.primary_color is defined else {} %}

        <tr>
          <td>{{ loop.index }}</td>

          <td>
            <span class="filament-name">{{ main.material_name}}</span>
          </td>

          <td>
            <span class="filament-kind">{{ main.material_type}}</span>
          </td>

          <td>
            <span class="filament-manufacturer">{{ main.brand_name}}</span>
          </td>

          <td>
            <span class="filament-color">{{ primary_color.hex}}</span>
          </td>

          <td>
            <div class="btn-group" role="group">
              <button type="button" class="btn btn-success btn-sm write-btn">
                <i class="fas fa-pen"></i>
              </button>
              <button type="button" class="btn btn-secondary btn-sm read-btn">
                <i class="fas fa-book"></i>
              </button>
              <button type="button" class="btn btn-danger btn-sm delete-btn">
                <i class="fas fa-trash"></i>
              </button>
            </div>
          </td>
        </tr>
      {% endfor %}

      {% if rows|length == 0 %}
        <tr>
          <td colspan="6" class="text-muted">No filaments found.</td>
        </tr>
      {% endif %}
    </tbody>
  </table>

  <div id="clothopus_status" class="mt-3 text-muted"></div>
</div>
